Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(b=c[f],a.call(e,b,f,c))return b;return void 0});var DDRAppConfig={},DD={generatedId:1,genId:function(){return this.generatedId++},extend:function(){for(var a=arguments,b={},c=0;c<a.length;c++)if(DD.isObject(a[c])){var d=a[c];for(var e in d)DD.isObject(d[e])?DD.isObject(b[e])?DD.merge(b[e],d[e]):b[e]=DD.merge({},d[e]):b[e]=d[e]}return b},merge:function(a,b){function c(a,b){if(-1!==d.indexOf(b))return b;if(d.push(b),DD.isArray(a)&&DD.isArray(b))b.forEach(function(b,d){DD.isArray(b)?a[d]=c([],b):DD.isObject(b)?a[d]=c({},b):a[d]=b});else for(var e in b)DD.isObject(b[e])?(DD.isObject(a[e])||(a[e]={}),c(a[e],b[e])):DD.isArray(b[e])?(DD.isArray(a[e])||(a[e]=[]),b[e].forEach(function(b,d){var f;f=DD.isObject(b)?c({},b):DD.isArray(b)?c([],b):b,a[e][d]=f})):a[e]=b[e];return a}if("object"!=typeof a)throw DD.Error.handle("invoke","DD.merge",0,"object");if("object"!=typeof b)throw DD.Error.handle("invoke","DD.merge",1,"object");var d=[];return c(a,b),a},assign:function(a,b){Object.assign?Object.assign(a,b):DD.getOwnProps(b).forEach(function(c){a[c]=b[c]})},getOwnProps:function(a){return Object.getOwnPropertyNames(a)},isFunction:function(a){return void 0!==a&&null!==a&&a.constructor===Function},isArray:function(a){return void 0!==a&&null!==a&&a.constructor===Array},isObject:function(a){return null!==a&&void 0!==a&&a.constructor===Object},isInt:function(a){return Number.isInteger(a)},isString:function(a){return"string"==typeof a},isEmpty:function(a){if(null===a||void 0===a)return!0;var b=typeof a;if(DD.isObject(a)){var c=Object.keys(a);if(void 0!==c)return 0===c.length}else if("string"===b)return""===a;return!1},get:function(a,b,c){return c=c||document,b===!0?c.querySelectorAll(a):c.querySelector(a)},append:function(a,b){if(DD.isNode(b))a.appendChild(b);else if(DD.isString(b)){var c=DD.newEl("div");c.innerHTML=b,DD.transChildren(c,a)}},isEl:function(a){return void 0!==a&&null!==a&&a.nodeType===Node.ELEMENT_NODE},isNode:function(a){return void 0!==a&&null!==a&&(a.nodeType===Node.TEXT_NODE||a.nodeType===Node.ELEMENT_NODE||a.nodeType===Node.DOCUMENT_FRAGMENT_NODE)},cloneNode:function(a){if(!DD.isNode(a))throw DD.Error.handle("invoke","DD.cloneNode",0,"Node");var b;return b=a.cloneNode(!0),DD.copyProp(b,a),b},copyProp:function(a,b){var c={},d=["$model","$module","$events"];DD.getOwnProps(b).forEach(function(a){if("$"===a[0]){for(var e=!1,f=0;f<d.length;f++)if(a===d[f]){e=!0;break}e||(c[a]=b[a])}}),DD.merge(a,c),a.$module=b.$module,a.$events={},b.$model&&(a.$model={},DD.getOwnProps(b.$model).forEach(function(c){a.$model[c]=b.$model[c]})),DD.isEmpty(b.$events)||DD.getOwnProps(b.$events).forEach(function(c){var d=b.$events[c];if(d instanceof DD.Event){d.module;d.view=a,delete d.module;var e=DD.merge({},d);new DD.Event(e)}});for(var e=0;e<a.childNodes.length;e++)DD.copyProp(a.childNodes[e],b.childNodes[e])},getAttrs:function(a,b){if(!DD.isEl(a))throw DD.Error.handle("invoke","DD.getAtrs",0,"element");for(var c=[],d=0;d<a.attributes.length;d++){var e=a.attributes[d];b.test(e.name)&&c.push(e)}return c},getAttrsByValue:function(a,b){if(!DD.isEl(a))throw DD.Error.handle("invoke","DD.getAttrsByValue",0,"element");if(!b instanceof RegExp)throw DD.Error.handle("invoke","DD.getAttrsByValue",1,"RegExp");for(var c=[],d=0;d<a.attributes.length;d++){var e=a.attributes[d];b.test(e.value)&&c.push(e)}return c},copyAttrs:function(a,b){if(!DD.isEl(a))throw DD.Error.handle("invoke","DD.copyAttrs",0,"element");if(!DD.isEl(b))throw DD.Error.handle("invoke","DD.copyAttrs",1,"element");for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];b.setAttribute(d.name,d.value)}},newEl:function(a,b,c){if(!DD.isString(a)||DD.isEmpty(a))throw DD.Error.handle("invoke","DD.newEl",0,"string");var d=document.createElement(a);return DD.isObject(b)?DD.attr(d,b):DD.isString(c)&&(d.innerHTML=c),d},replaceNode:function(a,b,c){if(!DD.isNode(a))throw DD.Error.handle("invoke","DD.replaceNode",0,"Node");if(!DD.isNode(b)&&!DD.isArray(b))throw DD.Error.handle("invoke1","DD.replaceNode",1,"Node","Node Array");var d=a.parentNode,e=a.nextSibling;null!==d&&(d.removeChild(a),DD.isArray(b)||(b=[b]),b.forEach(function(b){void 0===e||null===e?d.appendChild(b):d.insertBefore(b,e),c!==!1&&(c=!0),c&&a.$isView&&DD.copyProp(b,a)}))},insertAfter:function(a,b,c){var d=this;if(!DD.isNode(a))throw DD.Error.handle("invoke","DD.insertAfter",0,"Node");if(!DD.isNode(b)&&!DD.isNode(c))throw DD.Error.handle("invoke2","DD.insertAfter",1,2,"Node");var e=null;void 0===b||null===b?e=c.firstChild:(c=b.parentNode,e=b.nextSibling),DD.isNode(c)&&(null===e?DD.isArray(a)?a.forEach(function(a){d.isEl(a)&&c.appendChild(a)}):c.appendChild(a):DD.isArray(a)?a.forEach(function(a){d.isEl(a)&&c.insertBefore(a,e)}):c.insertBefore(a,e))},empty:function(a){var b=this;if(!b.isEl(a))throw DD.Error.handle("invoke","DD.empty",0,"Element");for(var c=a.childNodes,d=c.length-1;d>=0;d--)a.removeChild(c[d])},remove:function(a){var b=this;if(!b.isNode(a))throw DD.Error.handle("invoke","DD.remove",0,"Node");null!==a.parentNode&&a.parentNode.removeChild(a)},copyChildren:function(a){var b=this;if(!b.isEl(a))throw DD.Error.handle("invoke","DD.copyChildren",0,"Element");for(var c=a.childNodes,d=[],e=c.length-1;e>=0;e--)d.push(c[e]);return d},transChildren:function(a,b){var c=this;if(!c.isEl(a))throw DD.Error.handle("invoke","DD.copyChildren",0,"Element");if(!c.isEl(b))throw DD.Error.handle("invoke","DD.copyChildren",1,"Element");for(var d=document.createDocumentFragment();a.childNodes.length>0;)d.appendChild(a.childNodes[0]);b.appendChild(d)},attr:function(a,b,c){var d=this;if(!d.isEl(a))throw DD.Error.handle("invoke","DD.attr",0,"Element");if(DD.isEmpty(b))throw DD.Error.handle("invoke","DD.attr",1,"string","object");if(void 0===c||null===c){if(DD.isObject(b))DD.getOwnProps(b).forEach(function(c){a.setAttribute(c,b[c])});else if(DD.isString(b))return a.getAttribute(b)}else a.setAttribute(b,c)},css:function(a,b,c){var d=this;if(!d.isEl(a))throw DD.Error.handle("invoke","DD.css",0,"Element");if(DD.isEmpty(b))throw DD.Error.handle("invoke1","DD.css",1,"string","object");var e=document.defaultView.getComputedStyle(a,null);if(void 0===c||null===c){if(!DD.isObject(b))return e[b];Object.getOwnPropertyNames(b).forEach(function(c){void 0!==DD.cssconfig&&void 0!==DD.cssconfig[c]?DD.cssconfig[c].forEach(function(d){a.style[d]=b[c]}):a.style[c]=b[c]})}else void 0!==DD.$cssconfig&&void 0!==DD.$cssconfig[b]?DD.$cssconfig[b].forEach(function(b){a.style[b]=c}):a.style[b]=c},addClass:function(a,b){if(!DD.isEl(a))throw DD.Error.handle("invoke","DD.css",0,"Element");if(DD.isEmpty(b))throw DD.Error.handle("invoke","DD.css",1,"string");var c=a.className.trim();if(DD.isEmpty(c))a.className=b;else{for(var d=c.split(/\s+/),e=0;e<d.length;e++)if(d[e]===b)return;d.push(b),a.className=d.join(" ")}},removeClass:function(a,b){if(!DD.isEl(a))throw DD.Error.handle("invoke","DD.css",0,"Element");if(DD.isEmpty(b))throw DD.Error.handle("invoke","DD.css",1,"string");var c=a.className.trim();if(!DD.isEmpty(c))for(var d=c.split(/\s+/),e=0;e<d.length;e++)if(d[e]===b)return d.splice(e,1),void(a.className=d.join(" "))},formatDate:function(a,b){if(DD.isString(a)&&-1!==a.indexOf("/")&&-1!==a.indexOf("-")&&-1!==a.indexOf(":"))try{a=parseInt(a)}catch(c){}var a=new Date(a);if(isNaN(a.getDay()))throw DD.Error.handle("invoke","DD.formatDate",0,"date string","date");var d={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours()%12===0?12:a.getHours()%12,"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()},e={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};return/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),DD.getOwnProps(d).forEach(function(a){new RegExp("("+a+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?d[a]:("00"+d[a]).substr((""+d[a]).length)))}),/(E+)/.test(b)&&(b=b.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+e[a.getDay()+""])),b},toDate:function(a){var b;try{b=new Date(Date.parse(a))}catch(c){throw DD.Error.handle("invoke","DD.toDate",0,"date string")}return(isNaN(b)||isNaN(b.getDay()))&&(14===a.length?(a=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2)+" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12),b=new Date(Date.parse(a))):8===a.length&&(a=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2),b=new Date(Date.parse(a)))),b},compileStr:function(a){for(var b,c=new RegExp(/\{.+?\}/),d=arguments;null!==(b=c.exec(a));){var e,f=b[0].substr(1,b[0].length-2),g=parseInt(f)+1;e=void 0!==d[g]?d[g]:"",a=a.replace(c,e)}return a},parseJson:function(a){a=a.trim();var b=a.substr(1,a.length-2).split(","),c={},d=new RegExp(/\'/g);new RegExp(/\"/g);return b.forEach(function(a){var b=a.split(":");if('"'!==b[0]&&"'"!==b[0]||'"'!==b[b.length-1]&&"'"!==b[b.length-1]){var e=b[0].replace(d,"\\'"),f=b[1],g=f.length;g>2&&('"'===f[0]&&'"'===f[g-1]||'"'===f[0]&&'"'===f[g-1])&&(f=f.substr(1,g-2)),c[e]=f}}),c}};DD.http={get:function(a){},post:function(a){},load:function(a){var b=this;b.request(a)},request:function(a){var b=new XMLHttpRequest;if(DD.isEmpty(a.url))throw DD.error.handle("load 参数错误");var c=a.type||"text";switch(c){case"html":b.overrideMimeType("text/html;charset=utf-8");break;case"json":b.overrideMimeType("text/javascript;charset=utf-8");break;case"js":b.overrideMimeType("text/javascript;charset=utf-8");break;case"xml":b.overrideMimeType("text/xml;charset=utf-8");break;default:b.overrideMimeType("text/plain;charset=utf-8")}b.timeout=a.timeout||0,"function"==typeof a.successFunc&&(b.onload=function(c){switch(b.status){case 200:var d=b.responseText;switch(a.type){case"json":d=JSON.parse(d);break;case"js":var e=DD.newEl("script");e.innerHTML=d;var f=DD.get("head");f.append(e),e.innerHTML="",e.src=a.url,d=e}a.successFunc.call(b,d);break;default:DD.isFunction(a.errorFunc)&&a.errorFunc.call(b,b.status)}}),DD.isFunction(a.errorFunc)&&(b.onerror=a.errorFunc),DD.isFunction(a.timeoutFunc)&&(b.ontimeout=a.timeoutFunc);var d=a.reqType||"GET",e=null;if(DD.isObject(a.params)){var f=[];Object.getOwnPropertyNames(a.params).forEach(function(b){f.push(b+"="+a.params[b])}),e=f.join("&")}var g=a.url;switch(d){case"GET":null!==e&&(g+=-1!==g.indexOf("?")?"&"+e:"?"+e),b.open(d,g,!0),b.send(null);break;case"POST":b.setRequestHeder("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),b.open(d,g,!0),b.send(e)}}},DD.config={renderTick:200,appPath:""},DD.Error={handle:function(a){var b=(new RegExp(/\{.+?\}/),DD.ErrorMsgs[a]);if(void 0===b)return"未知错误";for(var c=[b],d=1;d<arguments.length;d++)c.push(arguments[d]);return DD.compileStr.apply(DD,c)}},function(){var a=function(b){var c=this;if(c.events=[],c.view=b.view,c.handler=b.handler,c.eventName=b.eventName,c.once=b.once||!1,c.delg=b.delg||!1,c.nopopo=b.nopopo||!1,c.capture=b.capture||!1,c.delg){var d,e=c.view.parentNode;d=void 0===e.$events[c.eventName]?new a({eventName:c.eventName,view:e}):e.$events[c.eventName],d.delegate(c)}else c.bind()};a.prototype.fire=function(a){var b=this;if(void 0!==b.view){for(var c=0;c<b.events.length;c++){var d=b.events[c];if(d.view.contains(a.target)){if(d.nopopo&&a.stopPropagation(),d.handler.call(b.view.$module,d.view,a),d.once&&d.undelegate(),d.nopopo)return;break}}DD.isFunction(b.handler)&&(b.nopopo&&a.stopPropagation(),b.handler.call(b.view.$module,b.view,a)),b.once&&b.unbind()}},a.prototype.bind=function(a){var b=this;DD.isFunction(b.handleMe)&&b.view.removeEventListener(b.eventName,b.handleMe,b.capture),b.handleMe=function(a){b.fire(a)},b.view.addEventListener(b.eventName,b.handleMe,b.capture),b.view.$events[b.eventName]=b},a.prototype.unbind=function(){var a=this;delete a.handler},a.prototype.delegate=function(a){var b=this,c=b.events.indexOf(a);if(-1!==c)throw DD.Error.handle("exist",a,DD.words.event);b.bind(),a.parent=b,b.events.push(a),a.view.$events[a.eventName]=a},a.prototype.undelegate=function(){var a=this,b=a.parent;if(b){var c=b.events.indexOf(a);-1!==c&&b.events.splice(c,1)}},DD.Event=a}(),function(){var M=function(){};M.prototype.handle=function(a,b,c,d){var e=this,f="";return DD.isArray(b)?(b.forEach(function(b){f+="string"===b.type?b.src:e.cacExpr(a,b.src,c,d)}),f):void 0},M.prototype.initExpr=function(a,b){for(var c,d=this,e=new RegExp(/\{\{.+?\}\}/g),f=[],g=0;null!==(c=e.exec(a));)c.index>g&&f.push({type:"string",src:a.substring(g,c.index)}),f.push({type:"expr",src:d.initOne(c[0].substring(2,c[0].length-2),b)}),g=c.index+c[0].length;return f},M.prototype.initOne=function(a,b){function c(a){for(var b=[],c=[],d=0,e=0;e<a.length;e++)for(var f=g.length-1;f>=0;f--){var h=g[f].length;if(a.substr(e,h)===g[f]){b.push(a.substr(d,e-d).trim()),c.push(g[f]),e+=h-1,d=e+1;break}}return d<a.length&&b.push(a.substr(d).trim()),[b,c]}function d(a){var c=[],d=a.substring(a.indexOf("(")+1,a.lastIndexOf(")"));if(""!==d&&""!==(d=d.trim())){var e=d.split(",");e.forEach(function(a){a=a.trim();for(var d=0;d<m.length;d++)if(k+d===a)return void c.push({type:"string",src:m[d]});var e;e=isNaN(a)?{type:"field",src:a}:{type:"number",src:a},c.push(e),void 0!==b&&"field"===e.type&&bindOne(e)})}return c}function e(){for(var a=0;a<o[1].length;a++)if("|"===o[1][a]){var b={type:"filter",exprs:[o[0][a],o[0][a+1]],signs:[]},c=a,d=o[1][a-1];if(")"===d){b.exprs[0]=o[0][a-1],o[0].splice(a);for(var e=a-2;e>=0;e--)if("("===o[1][e]){c=e;break}b.signs.unshift(d);for(var e=a-2;e>=c;e--)b.exprs.unshift(o[0][e]),b.signs.unshift(o[1][e])}o[0].splice(c,a-c+2,b),o[1].splice(c,a-c+1),a=c}}for(var f,g=["(",")","!","|","*","/","+","-",">","<",">=","<=","==","===","&&","||","%"],h=new RegExp(/[\w$][\w$\d\.]*\(.*?\)/),i=new RegExp(/(\'.+?\')|(\".+?\")/),j="$DDfun_rep_",k="$DDstr_rep_",l=[],m=[],n=0;null!==(f=i.exec(a));)a=a.replace(f[0],k+n++),m.push(f[0]);for(n=0;null!==(f=h.exec(a));)a=a.replace(f[0],j+n++),l.push(f[0]);var o=c(a),p=[];return o[0].forEach(function(a,b){for(var c=0;c<l.length;c++)if(-1!==a.indexOf(j+c)){var e=l[c].indexOf("("),f=l[c].substr(0,e).trim(),g=d(l[c]);return void p.push({type:"function",fn:f,params:g})}for(var c=0;c<m.length;c++)if(-1!==a.indexOf(k+c))return void p.push({type:"string",src:a.replace(k+c,m[c])});""===a?p.push({type:"blank",src:a}):isNaN(a)?"true"===a||"false"===a?p.push({type:"string",src:a}):p.push({type:"field",src:a}):p.push({type:"number",src:a})}),o[0]=p,e(),o},M.prototype.cacExpr=function(module,stacks,datas,alias){function invoke(funObj){var foo,isSystem=!1;if(-1===funObj.fn.indexOf(".")){if(foo=module.methodFactory.get(funObj.fn),void 0===foo)throw DD.Error.handle("notexist1",DD.words.module+DD.words.method,funObj.fn)}else isSystem=!0,foo=eval(funObj.fn);var pa=[];return funObj.params.forEach(function(p){switch(p.type){case"field":var v=getValue(datas,p.src,alias);if(void 0===v||null===v)throw DD.Error.handle("notexist1",DD.words.dataItem,p.src);pa.push(v);break;case"number":pa.push(eval(p.src));break;default:pa.push(p.src)}}),isSystem?foo.apply(null,pa):foo.apply(module,pa)}function filter(filterObj){for(var exprs=filterObj.exprs,signs=filterObj.signs,src,r="",i=0;i<exprs.length-1;i++)r+=cacOne(exprs[i]),i<signs.length&&(r+=signs[i]);if(signs.length>0)try{r=eval(r)}catch(e){}return DD.Filter.handle(module,r,exprs[i].src)}function cacOne(a){switch(a.type){case"field":var b=a.src,c=getValue(datas,b,alias);return void 0===c?"":c;case"function":return invoke(a);case"filter":return filter(a);default:return a.src}}function getValue(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(null!==e&&void 0!==e){if("object"!=typeof e)return e;if(DD.isEmpty(c)||0!==b.indexOf(c+".")||(b=b.substr(c.length+1)),DD.isFunction(e.get)){var f=e.get(b);if(void 0!==f)return f}}}}var expr="";if(stacks[0].forEach(function(a,b){var c=cacOne(a),d="";stacks[1].length>b&&""!==stacks[1][b]&&(DD.isString(c)&&(c=-1!==c.indexOf("'")?'"'+c+'"':"'"+c+"'"),d=stacks[1][b]),expr+=c+d}),stacks[1].length>0)try{""!==expr&&(expr=eval(expr))}catch(e){}return expr},DD.Expression=new M}(),function(){function a(a){var b,c,d,e,f,g=this,h=a.split(" in ");h[0]=h[0].trim(),h[1]=h[1].trim();var b,i;if("("===h[0].charAt(0)&&")"===h[0].charAt(h[0].length-1)){var j=h[0].substr(1,h[0].length-2).split(",");b=j[0].trim(),i=j[1].trim()}else b=h[0];c=h[1],-1!==(f=c.indexOf("|"))?(d=c.substr(0,f).trim(),e=c.substr(f+1).trim()):d=c,g.$directives.push({name:"model",value:d});var k=g.$getDirective("repeat");k.value=d,k.filter=e,k.done=!1,g.$savedDoms.repeat=g,g.$model.aliasName=b,g.$model.indexName=i;var l=document.createTextNode("");DD.replaceNode(g,l)}function b(a){var b=this,c=b.nextElementSibling,d=b.$getDirective("if");d.value=DD.Expression.initExpr("{{"+d.value+"}}");var e=[b];DD.isEl(c)&&c.hasAttribute("x-else")?(d.hasElse=!0,e.push(c)):d.hasElse=!1;var f=document.createTextNode("");DD.replaceNode(b,f),b.$removeDirective("if"),f.$savedDoms["if"]=e}function c(a){this.$removeDirective("else"),DD.remove(this)}function d(a){var b=this;b.$savedDoms.show=b;var c=b.$getDirective("show");c.value=DD.Expression.initExpr("{{"+c.value+"}}");var d=document.createTextNode("");DD.replaceNode(b,d),b.$removeDirective("show")}function e(a){var b=this,c=b.$getDirective("class"),d=DD.parseJson(a);if(DD.isObject(d)){var e={};DD.getOwnProps(d).forEach(function(a){DD.isString(d[a])&&(e[a]=DD.Expression.initExpr("{{"+d[a]+"}}",b.$module))}),c.value=e}}function f(){var a=this,b=a.$getDirective("field").value,c=a.tagName.toLowerCase(),d="input";"input"!==c||"checkbox"!==a.type&&"radio"!==a.type||(d="change"),new DD.Event({view:a,eventName:d,handler:function(a,c){var d=a.$getData();"checkbox"===a.type&&(DD.attr(a,"yes-value")===a.value?a.value=DD.attr(a,"no-value"):a.value=DD.attr(a,"yes-value")),d[b]=a.value}})}function g(a){var b=this,c=b.previousElementSibling;if(a===c.$getDirective("field").value){b.$validity={field:c,tips:{}};for(var d=b.children,e=0;e<d.length;e++){var f=d[e].getAttribute("rel");b.$validity.tips[f]=d[e]}b.$savedDoms.validity=b,DD.empty(b)}var g=document.createTextNode("");DD.replaceNode(b,g)}function h(){void 0!==DD.Router&&DD.Router.initView(this)}function i(a){if(a&&(a=a.trim(),!DD.isEmpty(a)&&void 0!==DD.Route)){if(a&&"{{"===a.substr(0,2)&&"}}"===a.substr(a.length-2,2))return;DD.attr(this,"path",a),DD.Route.initView(this)}}function j(a){var b=this;b.$getData()}function k(a){var b=this;DD.isEmpty(a)&&(a=b.$getDirective("repeat"));var c=b.$getData();if(void 0!==c&&DD.isArray(c)&&0!==c.length){var d=[];if(void 0!==a.filter){var e=DD.Filter.handle(b.$module,c,a.filter);e.forEach(function(a){d.push(a)})}else d=c;for(var f=[],g=b.nextElementSibling;null!==g&&g.$fromNode===b;)f.push({node:g}),g=g.nextElementSibling;var h=b,i=!1,j=[];if(d.forEach(function(a,c){for(var d=-1,e=0;e<f.length;e++)if(f[e].node.$getData()===a){d=e,f[e].index=c,e!==d&&(i=!0),j.push(f[e].node);break}if(-1===d){var g=DD.cloneNode(b.$savedDoms.repeat);g.$removeDirective("model"),g.$removeDirective("repeat"),g.$fromNode=b,g.$model={aliasName:b.$model.aliasName,indexName:b.$model.indexName,data:a},j.push(g),i=!0}}),f.forEach(function(a){void 0===a.index&&DD.remove(a.node),i=!0}),i){var h=b;j.forEach(function(a,c){void 0!==b.$model.indexName&&a.$getData().set(b.$model.indexName,c),DD.insertAfter(a,h),h=a})}}}function l(a){var b=this;DD.isEmpty(a)&&(a=b.$getDirective("if"));var c=DD.Expression.handle(b.$module,a.value,[b.$getData(),b.$module.data],b.$model.aliasName);c=c&&"false"!==c?!0:!1;var d;if(c){if(a.yes===!0)return;d=b.$savedDoms["if"][0]}else if(a.hasElse){if(a.yes===!1)return;d=b.$savedDoms["if"][1]}if(a.yes=c,null!==b.nextSibling&&b.nextSibling.$fromNode===b&&DD.remove(b.nextSibling),void 0!==d){var e=DD.cloneNode(d);DD.insertAfter(e,b),e.$fromNode=b}}function m(a){var b=this;if(b.nodeType===Node.ELEMENT_NODE){DD.isEmpty(a)&&(a=b.$getDirective("class"));var c=b.$getData(),d=a.value;DD.getOwnProps(d).forEach(function(a){if(DD.isArray(d[a])){var e=DD.Expression.handle(b.$module,d[a],[c,b.$module.data],b.$model.aliasName);e=e&&"false"!==e?!0:!1,e?DD.addClass(b,a):DD.removeClass(b,a)}})}}function n(a){var b=this;DD.isEmpty(a)&&(a=b.$getDirective("show"));var c=DD.Expression.handle(b.$module,a.value,[b.$getData(),b.$module.data],b.$model.aliasName);if(c=c&&"false"!==c?!0:!1){if(a.yes===!0)return;var d=DD.cloneNode(b.$savedDoms.show);DD.insertAfter(d,b),d.$fromNode=b}else if(null!==b.nextSibling&&b.nextSibling.$fromNode===b&&DD.remove(b.nextSibling),a.yes===!1)return;a.yes=c}function o(a){var b=this,c=b.type,d=b.tagName.toLowerCase();if("radio"===c||"checkbox"===c||"select"===d){var e=b.$getData(),f=e[a.value];if("radio"===c){var g=DD.attr(b,"value");f==g?DD.attr(b,"checked","checked"):b.removeAttribute("checked")}else if("checkbox"===c){var h=DD.attr(b,"yes-value");f==h?(DD.attr(b,"checked","checked"),b.value=h):(b.removeAttribute("checked"),b.value=DD.attr(b,"no-value"))}else"select"===d&&setTimeout(function(){b.value=f},0)}}function p(a){function b(a){for(var b=0;b<a.length;b++)switch(a[b]){case"valueMissing":return"required";case"typeMismatch":return"type";case"patternMismatch":break;case"tooLong":return"maxLength";case"tooShort":return"minLength";case"rangeUnderflow":return"min";case"rangeOverflow":return"max";case"customError":return"custom"}}var c=this;if(DD.isEmpty(a)&&(a=c.$getDirective("checked")),c.$validity&&void 0!==!c.$validity.field&&c.$validity.field.validity){c.nextSibling.$fromNode===c&&DD.remove(c.nextSibling);var d,e=c.previousElementSibling;if(null!==e&&!e.validity.valid){var f=e.validity,g=[];for(var h in f)f[h]===!0&&g.push(h);var d=b(g),i=c.$validity.tips,j=c.$savedDoms.validity.cloneNode(!1);if(j.$fromNode=c,DD.isEl(i[d]))j.appendChild(i[d]);else{var k=document.createTextNode(DD.compileStr(DD.FormMsgs[d],DD.attr(c.$validity.field,d)));j.appendChild(k)}DD.insertAfter(j,c)}}}function q(a){var b=this;if(b.$routeConfig.active){var c=b.$routeConfig.path;setTimeout(function(){b.$module.router.start(c,b,!0)},0)}}var r=function(){var r=this;r.factory={},r.directives={model:{preOrder:1,once:!0,sys:!0,handler:j},"class":{preOrder:1,once:!1,sys:!0,init:e,handler:m},repeat:{preOrder:6,once:!1,sys:!0,init:a,handler:k},"if":{preOrder:5,once:!1,sys:!0,init:b,handler:l},"else":{preOrder:5,once:!1,sys:!0,init:c},show:{preOrder:5,sys:!0,init:d,handler:n},field:{preOrder:5,sys:!0,init:f,handler:o},validity:{preOrder:5,sys:!0,init:g,handler:p},router:{preOrder:5,sys:!0,init:h,once:!0},route:{preOrder:5,sys:!0,init:i,handler:q,once:!0}}};r.prototype.add=function(a){var b=this;if(!DD.isEmpty(b.directives[a.directiveName]))throw DD.Error.handle("exist1",a.directiveName,DD.words.directive);b.directives[a.directiveName]=a},r.prototype.remove=function(a){var b=this;if(void 0!==b.directives[a])throw DD.Error.handle("notexist1",a,DD.words.directive);delete b.directives[a]},r.prototype.get=function(a){return this.directives[a]},r.prototype.initViewDirectives=function(a){var b=this,c=DD.getAttrs(a,/^x-/);c.length>1&&c.sort(function(a,c){var d,e,f,g;return f=a.name.substr(2),g=c.name.substr(2),d=b.directives[f],e=b.directives[g],d.preOrder-e.preOrder}),c.forEach(function(b){a.removeAttribute(b.name)}),c.forEach(function(c){var d=c.name.substr(2),e=c.value;a.$directives.push({name:d,value:e}),void 0!==b.directives[d]&&DD.isFunction(b.directives[d].init)&&b.directives[d].init.call(a,e)})},r.prototype.initViewDirective=function(a,b){var c=this;b.length>1&&b.sort(function(a,b){var d,e;return d=c.directives[a.name],e=c.directives[b.name],d.preOrder-e.preOrder}),b.forEach(function(b){b.value;void 0!==a.$getDirective(b.name)&&a.$removeDirective(b.name),void 0!==c.directives[b.name]&&DD.isFunction(c.directives[b.name].init)&&c.directives[b.name].init.call(a,b.value)})},r.prototype.handle=function(a){var b=this,c=[];if(a.$directives.forEach(function(d){var e=d.name,f=b.directives[e];void 0!==f&&DD.isFunction(f.handler)&&(f.handler.call(a,d),f.once===!0&&c.push(a.$directives.indexOf(d)))}),c.length>0)for(var d=c.length-1;d>=0;d--)a.$directives.splice(d,1)},DD.Directive=new r,DD.Directive.create=function(a){if(!DD.isObject(a)||DD.isEmpty(a))throw DD.Error.handle("invoke","createDirective",1,"object");if(DD.isEmpty(a.name))throw DD.Error.handle("invoke","createDirective","name","string");if(DD.Directive.directives[a.name])throw DD.Error.handle("exist1",DD.words.directive,a.name);if(a.init&&!DD.isFunction(a.init))throw DD.Error.handle("invoke","createDirective","init","function");if(a.handler&&!DD.isFunction(a.handler))throw DD.Error.handle("invoke","createDirective","handler","function");(void 0===a.preOrder||a.preOrder<10)&&(a.preOrder=10),a.once=a.once||!1,DD.Directive.directives[a.name]=a},DD.Directive.remove=function(a){var b=DD.Directive.directives[a];if(b&&b.sys)throw DD.Error.handle("notremove1",DD.words.directive,a);delete DD.Directive.directives[a]},DD.createDirective=DD.Directive.create,DD.removeDirective=DD.Directive.remove}(),function(){var M=function(){var me=this;me.cantEditFilters=["date","currency","number","tolowercase","touppercase","orderBy","filter"],me.filters={date:function(a,b){if(DD.isEmpty(a))throw DD.Error.handle("invoke","filter date",0,"string");if(!DD.isArray(b))throw DD.Error.handle("paramException",DD.words.filter,"date");var c=b[0];return c=c.substr(1,c.length-2),DD.formatDate(a,c)},currency:function(a,b){var c;if(DD.isArray(b)&&(c=b[0]),isNaN(a))throw DD.Error.handle("paramException",DD.words.filter,"currency");return"string"==typeof a&&(a=parseFloat(a)),DD.isEmpty(c)&&(c="¥"),c+me.filters.number(a,[2])},number:function(a,b){if(!DD.isArray(b))throw DD.Error.handle("paramException",DD.words.filter,"number");var c=b[0]||0;if(isNaN(a)||0>c)throw DD.Error.handle("paramException",DD.words.filter,"number");return"string"==typeof a&&(a=parseFloat(a)),a.toFixed(c)},tolowercase:function(a){if(!DD.isString(a)||DD.isEmpty(a))throw DD.Error.handle("invoke1",DD.words.filter+" tolowercase",0,"string");return a.toLowerCase()},touppercase:function(a){if(!DD.isString(a)||DD.isEmpty(a))throw DD.Error.handle("invoke1",DD.words.filter+" touppercase",0,"string");return a.toUpperCase()},orderBy:function(a,b){if(!DD.isArray(b))throw DD.Error.handle("invoke1",DD.words.filter+" orderBy",0,"array");var c=b[0],d=b[1]||"asc",e=a.concat([]);return e.sort(function(a,b){return"asc"===d?a[c]>b[c]:a[c]<b[c]}),e},filter:function(array,pa){var me=this;if(!DD.isArray(array))throw DD.Error.handle("invoke1",DD.words.filter+" filter",0,"array");if(DD.isEmpty(pa))throw DD.Error.handle("invoke3",DD.words.filter+" filter",0,"array");var handler={odd:function(a){for(var b=[],c=0;c<a.length;c++)c%2===1&&b.push(a[c]);return b},even:function(a){for(var b=[],c=0;c<a.length;c++)c%2===0&&b.push(a[c]);return b},range:function(a,b){var c,d;if(isNaN(b[0]))throw DD.Error.handle("paramException",DD.words.filter,"filter range");if(c=parseInt(b[0]),isNaN(b[1]))throw DD.Error.handle("paramException",DD.words.filter,"filter range");if(d=parseInt(b[1]),c>d)throw DD.Error.handle("paramException",DD.words.filter,"filter range");return a.slice(c,d+1)},index:function(a,b){if(!DD.isArray(a)||!DD.isArray(b))throw DD.Error.handle("paramException",DD.words.filter,"filter index");var c=[],d=a.length;return b.length>0&&b.forEach(function(b){isNaN(b)||(parseInt(b),b>=0&&d>b&&c.push(a[b]))}),c},func:function(a,b){if(!DD.isArray(a)||DD.isEmpty(b))throw DD.Error.handle("paramException",DD.words.filter,"filter func");var c=me.methodFactory.get(b[0]);return DD.isFunction(c)?c(a):a},value:function(arr,param){if(!DD.isArray(array)||DD.isEmpty(param))throw DD.Error.handle("paramException",DD.words.filter,"filter value");var ret=[];if("{"===param[0]&&"}"===param[param.length-1]&&(param=eval("("+param+")")),DD.isObject(param)){var keys=DD.getOwnProps(param);return arr.filter(function(a){for(var b=0;b<keys.length;b++){var c=a[keys[b]],d=param[keys[b]];if("string"==typeof c&&-1!==c.indexOf(d)||c===d)return!0}return!1})}return arr.filter(function(a){for(var b=DD.getOwnProps(a),c=0;c<b.length;c++){var d=a[b[c]];if(DD.isString(d)&&-1!==d.indexOf(param))return a}})}},type=pa[0].trim();if(handler.hasOwnProperty(type)||(type="value"),"range"===type||"index"===type||"func"===type){if(pa.length<2)throw DD.Error.handle("paramException",Dd.words.filter);return handler[type].call(me,array,pa.slice(1))}return"value"===type?handler[type].call(me,array,pa[0]):handler[type].call(me,array)}}};M.prototype.handle=function(a,b,c){var d=this;if(DD.isEmpty(b))return"";if(DD.isEmpty(c))return b;for(var e,f="$DD_rparam_",g=new RegExp(/(\{.+?\})|(".+?")|('.+?')/g),h=[],i=0;null!==(e=g.exec(c));)h.push(e[0]),c=c.replace(e[0],f+i++);var j=c.split("|");return j.forEach(function(c){if(!DD.isEmpty(c.trim())){var e=c.split(":"),g=e[0].trim();if(h.length>0)for(var i=1;i<e.length;i++)for(var j=0,k=h.length;k>j;j++)e[i]=e[i].trim().replace(f+j,h[j]);DD.isFunction(d.filters[g])&&(b=d.filters[g].call(a,b,e.slice(1)))}}),b},M.prototype.add=function(a,b){var c=this;if(-1!==c.cantEditFilters.indexOf(a))throw DD.error.handle("notupd",DD.words.system+DD.words.filter,a);if(void 0!==c.filters[a])throw DD.Error.handle("exist1",DD.words.filter,a);c.filters[a]=b},M.prototype.remove=function(a){var b=this;if(-1!==b.cantEditFilters.indexOf(a))throw DD.Error.handle("notupd",DD.words.system+DD.words.filter,a);if(void 0===b.filters[a])throw DD.Error.handle("notexist1",DD.words.filter,a);delete b.filters[a]},DD.Filter=new M}(),function(){var a=function(){var a=this;a.methods={}};a.prototype={add:function(a,b){var c=this;if(DD.isEmpty(a))throw DD.Error.handle("invoke","DD.MethodFactory.add",0,"string");if(!DD.isFunction(b))throw DD.Error.handle("invoke","DD.MethodFactory.add",0,"function");if(DD.isFunction(c.methods[a]))throw DD.Error.handle("exist1",DD.words.method,a);c.methods[a]=b},remove:function(a){var b=this;if(DD.isEmpty(a))throw DD.Error.handle("invoke","DD.MethodFactory.remove",0,"string");if(void 0===b.methods[a])throw DD.Error.handle("notexist1",DD.words.method,a);delete b.methods[a]},get:function(a){return this.methods[a]}},DD.MethodFactory=a}(),function(){var a=function(a){var b=this,c=a.data;return b.$module=a.module,DD.isObject(c)?b.createObjectModel(c):DD.isArray(c)&&b.createArrayModel(c),b.$module.data=c,c},b={$fields:{},set:function(a,b){var c,d,e=this,f=a.split("."),g=e;for(d=0;d<f.length-1&&(c=f[d],g=g[c],void 0!==g);d++);if(void 0===g)throw DD.Error.handle("notexist1",Dd.words.dataItem,c);void 0===g[f[d]]&&Object.defineProperty(g,f[d],{set:function(a){e.$model.setProp(g,f[d],a)},get:function(){return e.$model.getProp(g,f[d])}}),DD.isObject(b)?e.$model.createObjectModel(b):DD.isArray(b)&&e.$model.createArrayModel(b),g[f[d]]=b},get:function(a){for(var b=this,c=a.split("."),d=0;d<c.length&&b&&b.$model;d++)model=b.$model,b=model.getProp(b,c[d]);return b}};a.prototype.setProp=function(a,b,c){var d=this,e=a.$fields[b]!==c;e===!0&&(a.$fields[b]=c,d.change())},a.prototype.getProp=function(a,b){return a.$fields[b]},a.prototype.change=function(){DD.Renderer.add(this.$module)},a.prototype.createObjectModel=function(a){var c=this;DD.merge(a,b),a.$model=c,DD.getOwnProps(a).forEach(function(b){if("$"!==b[0]&&!DD.isFunction(a[b])){var d=a[b];DD.isObject(a[b])&&c.createObjectModel(a[b]),DD.isArray(a[b])?c.createArrayModel(a[b]):Object.defineProperty(a,b,{set:function(d){c.setProp(a,b,d)},get:function(){return c.getProp(a,b)}}),a[b]=d}})},a.prototype.createArrayModel=function(a){var b=this;a.$model=b;for(var c=0;c<a.length;c++){var d=a[c];DD.isObject(d)&&b.createObjectModel(d),DD.isArray(d)&&b.createArrayModel(d)}var e=["push","unshift","splice","pop","shift","reverse","sort"];e.forEach(function(c){a[c]=function(){Array.prototype[c].apply(a,arguments);var d=[];switch(c){case"push":d=arguments;break;case"unshift":d=arguments;break;case"splice":if(arguments.length>2)for(var e=2;e<arguments.length;e++)d.push(arguments[e])}for(var e=0;e<d.length;e++){
var f=d[e];DD.isObject(f)&&b.createObjectModel(f),DD.isArray(f)&&b.createArrayModel(f)}b.change()}})},DD.Model=a}(),function(){var a=function(a){var b=this;return b.name=a.name||"DDModule_"+DD.genId(),b.methodFactory=new DD.MethodFactory,b.events={},b.modules=[],b.inited=!1,b.compiled=!1,b.onReceive=a.onReceive,b.fromModules=a.fromModules,b.onRender=a.onRender,b.initConfig=DD.merge({delayInit:!1},a),b.el=b.initConfig.el,DD.isEmpty(a.methods)||DD.getOwnProps(a.methods).forEach(function(c){b.methodFactory.add(c,a.methods[c])}),delete a.methods,b.initConfig.delayInit||b.init(a),b};a.prototype.init=function(b){function c(){var a=0;DD.isArray(h.requires)&&h.requires.length>0?(h.requires.forEach(function(b){var c,e="js";switch(DD.isObject(b)?(c=b.path,e=b.type||e):"string"==typeof b&&(c=b),e){case"css":var f=DD.get("link[href='"+c+"']");if(null!==f)return;var g=DD.newEl("link");g.type="text/css",g.rel="stylesheet",g.href=c;var h=DD.get("head");null===h&&(h=document.body),h.append(g);break;default:var f=DD.get("script[src='"+c+"']");if(null!==f)return;a++,DD.http.load({url:c,type:e,successFunc:function(){0===--a&&d()}})}}),0===a&&d()):d()}function d(){if(DD.isObject(h.data)?e(h.data):DD.isEmpty(h.dataUrl)?e({}):DD.http.load({url:h.dataUrl,type:"json",successFunc:function(a){e(a)}}),h.parent instanceof a&&(g.parent=h.parent),!g.virtualDom){if(g.virtualDom=DD.newEl("div"),g.parent){var b=DD.get(h.el,!1,g.parent.virtualDom);null!==b&&DD.transChildren(b,g.virtualDom)}else{var b=DD.get(h.el,!1,document.body);null!==b&&(DD.transChildren(b,g.virtualDom),g.view=b,DD.merge(g.view,DD.extendElementConfig),DD.empty(g.view))}if(DD.isEmpty(h.template))if(DD.isEmpty(h.templateUrl))f(null);else{var c=h.templateUrl;DD.config&&!DD.isEmpty(DD.config.appPath)&&(c=DD.config.appPath+"/"+c),DD.http.load({url:c,successFunc:function(a){f(a)}})}else f(h.template)}}function e(a){g.data=new DD.Model({data:a,module:g}),DD.Renderer.add(g)}function f(a){null!==a&&DD.append(g.virtualDom,a),g.compile(),DD.isArray(h.modules)&&h.modules.forEach(function(a){g.addModule(a)}),DD.isFunction(b)&&b(g),delete g.initConfig}var g=this,h=g.initConfig;void 0!==h.router&&null!==h.router&&g.addRouter(h.router),g.inited=!0,c()},a.prototype.compile=function(){function a(b){DD.merge(b,DD.extendElementConfig),b.$module=c,DD.getAttrsByValue(b,/\{\{\S+?\}\}/).forEach(function(a){b.$attrs[a.name]=DD.Expression.initExpr(a.value,b)}),DD.Directive.initViewDirectives(b);for(var d=b.childNodes,e=0;e<d.length;e++){var f=d[e];switch(f.nodeType){case Node.TEXT_NODE:/\{\{.+\}\}?/.test(f.textContent)&&(f.$exprs=DD.Expression.initExpr(f.textContent,c),f.textContent="");break;case Node.COMMENT_NODE:b.removeChild(f),e--;break;default:a(f)}}return b}var b,c=this;if(c.compiled=!1,c.className&&void 0!==(b=DD.Module.getClass(c.className))&&null!==b.virtualDom)return void(c.virtualDom=b.virtualDom);var d=a(c.virtualDom);void 0!==b&&(b.virtualDom=d),c.compiled=!0},a.prototype.render=function(a,b){function c(a,b){if(a.$isView){var d=a.$getData(),g=a.$model.aliasName;if(a.$isRouter&&!b&&f.router&&(f.router.renderView=a),!a.$rendered&&DD.isEl(a)&&e(a),DD.isEl(a)){var h=[];DD.getOwnProps(a.$attrs).forEach(function(b){if("function"!=typeof a.$attrs[b]){var c=DD.Expression.handle(a,a.$attrs[b],[d,f.data],g);"x-"===b.substr(0,2)?h.push({name:b.substr(2),value:c}):DD.attr(a,b,c)}}),h.length>0&&DD.Directive.initViewDirective(a,h)}if(DD.Directive.handle(a),a.childNodes)for(var i=0;i<a.childNodes.length;i++)c(a.childNodes[i]);a.$rendered=!0}else if(a.nodeType===Node.TEXT_NODE&&void 0!==a.$exprs){for(var j=DD.Expression.handle(f,a.$exprs,[a.parentNode.$getData(),f.data],a.parentNode.$model.aliasName),k=a.nextSibling;null!==k&&k.$fromNode===a;){var l=k.nextSibling;DD.remove(k),k=l}var m=document.createElement("div");m.innerHTML=j;for(var n=document.createDocumentFragment(),o=!1,i=0;i<m.childNodes.length;){var l=m.childNodes[i];DD.isEl(l)&&(o=!0),l.$fromNode=a,n.append(m.childNodes[i])}o?DD.insertAfter(n,a):a.textContent=j}return a}function d(a){return a.view||a.parent&&(a.parent.view||d(a.parent),void 0!==a.parent.view&&(a.view=DD.get(f.el,!1,a.parent.view)),a.view&&DD.empty(a.view)),a.view}function e(a){var b=DD.getAttrs(a,/^e-/);b.length>0&&b.forEach(function(b){var c=b.value.split(":"),d=f.methodFactory.get(c[0]);if(d){var e=b.name.substr(2),g={view:a,eventName:e,handler:d};if(c.length>1)for(var h=1;h<c.length;h++)g[c[h]]=!0;new DD.Event(g),a.removeAttribute(b.name)}})}var f=this;if(!f.data||!f.compiled)return!1;if(DD.isEl(f.view)||d(f),!DD.isEl(f.view))return!1;if(0===f.view.childNodes.length){var g=DD.cloneNode(f.virtualDom);c(g,!0),DD.transChildren(g,f.view),!f.rendered&&DD.isFunction(f.onRender)&&f.onRender(),f.rendered=!0}else c(f.view,!0);return!0},a.prototype.destroy=function(){delete DD.Module.moduleFactory[this.name],DD.Renderer.remove(this)},a.prototype.addModule=function(a){var b=this;if(!DD.isObject(a))throw DD.Error.handle("invoke1","addModule",0,"object");if(null!==b.getModule(a.name))throw DD.Error.handle("exitst1",DD.words.module,a.name);a.parent=b;var c=DD.Module.newInstance(a);return b.modules.push(c),c},a.prototype.addRouter=function(a){var b,c=this;return a instanceof DD.Router?(a.module=c,b=a):DD.isObject(a)&&(a.module=c,b=new DD.Router(a)),c.router=b,b},a.prototype.setData=function(a){var b=this;DD.getOwnProps(b.data).forEach(function(c){"$"===c[0]&&(a[c]=b.data[c])}),b.view&&DD.empty(b.view),new DD.Model({data:a,module:b}),DD.Renderer.add(b)},a.prototype.getModule=function(a){if(DD.isEmpty(a))throw DD.Error.handle("invoke1","getModule",0,"string");for(var b=0;b<this.modules.length;b++)if(this.modules[b].name===a)return this.modules[b];return null},a.prototype.broadcast=function(a){var b=this;if(b.parent){var c=b.name;b.parent.modules.forEach(function(d){if(d!==b&&DD.isFunction(d.onReceive)){var e=!0;DD.isArray(d.fromModules)&&0!==d.fromModules.length&&-1===d.fromMudules.indexOf(c)&&(e=!1),e&&d.onReceive.call(d,c,a)}})}},DD.assign(a,{classFactory:{},moduleFactory:{},define:function(a){var b=this,c=a.className;if(!c)throw DD.Error.handle("invoke","define","string");if(void 0!==b.classFactory[c])throw DD.Error.handle("exist1",DD.words.moduleClass,c);return b.classFactory[c]=DD.merge({virtualDom:null},a),b.classFactory[c]},getClass:function(a){return this.classFactory[a]},newInstance:function(a){var b,c=this;a.name;if(DD.isEmpty(a.className))b=a;else{var d=c.getClass(a.className);void 0!==d&&(b=DD.extend({},d,a))}var e=new DD.Module(b);return c.moduleFactory[e.name]=e,e},get:function(a){return this.moduleFactory[a]}}),DD.assign(DD,{createModule:function(a){return DD.Module.newInstance(a)},defineModule:function(a){return DD.Module.define(a)}}),DD.Module=a}(),function(){var a=function(a){var b=this;b.routes=[],b.history=[],b.views=[],b.root=a.root||"",b.currentView=null,b.renderView=null,b.module=a.module,b.name="DDRouter_"+DD.genId(),DD.isArray(a.routes)&&a.routes.forEach(function(a){b.add(a)}),window.addEventListener("popstate",function(a){DD.empty(b.renderView),b.currentView&&void 0!==b.currentView.$routeConfig.activeclass&&DD.removeClass(b.currentView,b.currentView.$routeConfig.activeclass);var c=history.state;null!==c&&b.start(c.path,b.views[c.path],!1)})};a.initView=function(a){a.$module.router&&(a.$module.router.renderView=a,a.$isRouter=!0,DD.empty(a))},a.prototype={start:function(a,b,c){var d=this;if(d.currentPath!==a){d.currentPath=a;var e=d.get(a);if(void 0===e)throw DD.Error.handle("notexist1",DD.words.route,a);if(DD.isEl(b)&&void 0!==b.$routeConfig.activeclass){var f=b.$routeConfig.activeclass;d.currentView&&DD.removeClass(d.currentView,f),DD.addClass(b,f)}e.start(a,c),d.currentView=b,d.views[a]=b}},add:function(a){var c=this;a.router=c;var d=a;return a instanceof b||(d=DD.createRoute(a)),c.routes.push(d),d},get:function(a){for(var b=this,c=0;c<b.routes.length;c++){var d=b.routes[c];if(d.match(a))return d;if(DD.isArray(d.routes)&&d.routes.length>0)return b.get.call(d,a)}}};var b=function(a){var b=this;if(DD.isEmpty(a)||!DD.isObject(a))throw DD.Error.handle("invoke","route",0,"object");if(DD.isEmpty(a.module)&&!a.module instanceof DD.module)throw DD.Error.handle("invoke2","route","module",DD.words.module,"string");if(DD.assign(b,a),DD.isString(a.module)){if(b.module=DD.Module.get(a.module),void 0===b.module)throw DD.Error.handle("notexist1",DD.words.module,a.module)}else a.module instanceof DD.Module&&(b.module=a.module);b.routes=[],b.type="string";var c;if(-1!==(c=b.path.indexOf("/:"))){b.type="param";var d=b.path.split("/:");b.path=d[0]+"/",b.paramNames=d.slice(1)}a.routes&&a.routes.length>0&&b.module.addRouter({routes:a.routes})};b.initView=function(b){var c=["path","activeclass","active"];b.$isRoute=!0;for(var d=b.attributes.length-1;d>=0;d--){var e=b.attributes[d],f=e.name.toLowerCase();-1!==c.indexOf(f)&&(b.$routeConfig[f]=e.value,b.removeAttribute(e.name)),"active"===f&&(b.$routeConfig.active=!0)}var g=b.$routeConfig.path;"a"===b.tagName.toLowerCase()&&DD.attr(b,"href",g),new DD.Event({view:b,eventName:"click",handler:function(b,c){c.preventDefault(),b.$module.router instanceof a&&b.$module.router.start(g,b,!0)}})},b.prototype.start=function(a,b){function c(){d.module.view=e.renderView,DD.empty(d.module.view),DD.Renderer.add(d.module),DD.isFunction(d.onEnter)&&d.onEnter.call(d.module)}var d=this,e=d.router;if(!DD.isEmpty(d.redirect)){var f=e.get(d.redirect);if(void 0===f)throw DD.error.handle("未找到匹配的路由"+d.redirect);return void f.start(f.path)}void 0!==e.current&&DD.isFunction(e.current.onLeave)&&e.current.onLeave.call(e.current.module),e.current=d;var g={};if("param"===d.type){var h=a.substr(d.path.length);h.split("/").forEach(function(a,b){var c=a.trim();""!==c&&(g[d.paramNames[b]]=c)})}d.module.inited?(d.module.data.set("$route",{path:a,data:g}),c()):d.module.init(function(){d.module.data.set("$route",{path:a,data:g}),c()}),b&&history.pushState({module:e.module.name,path:a},"",e.root+a)},b.prototype.match=function(a){var b=this;return 0===a.indexOf(b.path)?!0:!1},b.prototype.add=function(a){var c=this;a.router=c;var d=a;return!a instanceof b&&(d=new b(a)),c.routes.push(d),d},DD.Router=a,DD.Route=b,DD.createRoute=function(a){return new DD.Route(a)}}(),DD.extendElementConfig={$module:null,$directives:[],$savedDoms:{},$model:{},$attrs:{},$exprs:[],$isView:!0,$events:{},$validity:null,$routeConfig:{},$find:function(a,b){return b?this.querySelectorAll(a):this.querySelector(a)},$hasDirective:function(a){var b=this,c=b.$directives;if(DD.isArray(c))for(var d=0;d<c.length;d++)if(c[d].name===a)return!0;return!1},$getDirective:function(a){var b=this,c=b.$directives;if(DD.isArray(c))for(var d=0;d<c.length;d++)if(c[d].name===a)return c[d];return null},$removeDirective:function(a){var b=this,c=b.$directives;if(DD.isArray(c))for(var d=0;d<c.length;d++)if(c[d].name===a){c.splice(d);break}},$getData:function(){var a=this;if(!a.$isView)return null;if(void 0===a.$model.data){var b,c;if(null===a.parentNode){var c=a.$module.data;a.$hasDirective("model")&&(c=c[a.$getDirective("model").value]),a.$model.data=c}else{if(null!==a.parentNode&&a.parentNode.$isView&&(c=a.parentNode.$getData(),b=a.parentNode.$model),void 0!==b&&(void 0===a.$model.aliasName&&(a.$model.aliasName=b.aliasName),void 0===a.$model.indexName&&(a.$model.indexName=b.indexName),!DD.isEmpty(b.data)&&a.$hasDirective("model"))){var d=0,e=a.$getDirective("model").value;if(e===b.aliasName)c=b.data;else{var f=e.split(".");b.aliasName===f[0]&&f.length>1&&(d=1),c=b.data;for(var g=d;g<f.length&&void 0!==c;g++)try{c=c[f[g]]}catch(h){}}}a.$model.data=c}}return a.$model.data}},function(){function a(){DD.Renderer.render(),setTimeout(a,0)}var b=function(){var a=this;a.waitList=[],a.rendering=!1};b.prototype={add:function(a){var b,c=this;if(-1===(b=c.waitList.indexOf(a))){if(void 0===a.prop)for(var d=1,e=a.parent;void 0!==e;)d++,e=e.parent;a.prop=d,c.waitList.push(a),c.waitList.sort(function(a,b){return a.prop-b.prop})}},remove:function(a){var b;-1!==(b=me.waitList.indexOf(a))&&me.waitList.splice(b,1)},render:function(){var a=this;0!==a.waitList.length&&a.waitList.forEach(function(b,c){b.render()&&a.waitList.splice(c,1)})}},DD.Renderer=new b,a()}(),DD.words={system:"系统",module:"模块",moduleClass:"模块类",model:"模型",directive:"指令",expression:"表达式",event:"事件",method:"方法",filter:"过滤器",data:"数据",dataItem:"数据项",route:"路由"},DD.ErrorMsgs={unknown:"未知错误",paramException:"{0} {1}方法参数错误，请参考api",invoke:"{0}方法调用参数{1}必须为{2}",invoke1:"{0}方法调用参数{1}必须为{2}或{3}",invoke2:"{0}方法调用参数{1}或{2}必须为{3}",invoke3:"{0}方法调用参数{1}不能为空",exist:"{0}已存在",exist1:"{0} {1}已存在",notexist:"{0}不存在",notexist1:"{0} {1}不存在",notupd:"{0}不可修改",notremove:"{0}不可删除",notremove1:"{0}{1}不可删除"},DD.FormMsgs={type:"请输入有效的{0}",unknown:"输入错误",required:"不能为空",minLength:"输入长度最小为{0}",maxLength:"输入长度最大为{0}",betweenLength:"输入长度必须在{0}-{1}之间",min:"数字最小为{0}",max:"数字最大为{0}",between:"数字必需在{0}-{1}之间"};